<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lista Compartilhada - Lista F√°cil</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        body { font-family: 'Inter', sans-serif; }
        .gradient-text {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        .hero-gradient {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        .pulse-animation {
            animation: pulse 2s infinite;
        }
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body class="bg-gray-50">
    <!-- Navigation -->
    <nav class="fixed w-full bg-white/90 backdrop-blur-md shadow-sm z-50">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <a href="index.html" class="flex items-center space-x-3">
                    <img src="logo.png" alt="Lista F√°cil" class="h-10 w-10">
                    <span class="text-2xl font-bold gradient-text">Lista F√°cil</span>
                </a>
                <a href="index.html" class="text-gray-700 hover:text-purple-600 transition">
                    ‚Üê Voltar ao site
                </a>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <div class="pt-32 pb-20 px-6 fade-in">
        <div class="container mx-auto max-w-2xl">
            <!-- Card Principal -->
            <div class="bg-white rounded-2xl shadow-xl p-8 md:p-12 text-center">
                <!-- √çcone Grande -->
                <div class="w-24 h-24 mx-auto mb-6 hero-gradient rounded-full flex items-center justify-center pulse-animation">
                    <i class="fas fa-shopping-cart text-white text-4xl"></i>
                </div>

                <!-- T√≠tulo -->
                <h1 class="text-3xl md:text-4xl font-bold text-gray-900 mb-4">
                    Lista de Compras Compartilhada! üéâ
                </h1>

                <!-- Descri√ß√£o -->
                <p class="text-lg text-gray-600 mb-8">
                    Voc√™ recebeu uma lista de compras compartilhada. Clique no bot√£o abaixo para import√°-la 
                    diretamente no aplicativo Lista F√°cil e nunca mais esquecer de comprar nada!
                </p>

                <!-- Informa√ß√µes -->
                <div class="bg-purple-50 rounded-lg p-6 mb-8">
                    <div class="flex items-center justify-center space-x-4 mb-4">
                        <i class="fas fa-check-circle text-purple-600 text-2xl"></i>
                        <h3 class="text-xl font-semibold text-gray-900">Importa√ß√£o Autom√°tica</h3>
                    </div>
                    <p class="text-gray-700">
                        Ao clicar no bot√£o, o app ser√° aberto automaticamente e voc√™ poder√° confirmar a importa√ß√£o 
                        da lista compartilhada.
                    </p>
                </div>

                <!-- Bot√£o Importar -->
                <div id="importButtonContainer">
                    <button 
                        onclick="openApp()" 
                        class="w-full md:w-auto hero-gradient text-white px-12 py-5 rounded-full font-bold text-xl hover:opacity-90 transition transform hover:scale-105 shadow-lg pulse-animation"
                    >
                        <i class="fas fa-download mr-3"></i>
                        Importar Lista no App
                    </button>
                </div>

                <!-- Download App (se n√£o tiver) -->
                <div id="downloadAppContainer" class="hidden mt-6">
                    <p class="text-gray-600 mb-4">N√£o tem o app instalado?</p>
                    <a 
                        href="https://play.google.com/store/apps/details?id=io.github.themasterroot.listafacil" 
                        target="_blank"
                        class="inline-block bg-black text-white px-8 py-4 rounded-xl hover:bg-gray-900 transition"
                    >
                        <i class="fab fa-google-play mr-2"></i>
                        Baixar Lista F√°cil
                    </a>
                </div>

                <!-- Aviso -->
                <div class="mt-8 p-4 bg-blue-50 rounded-lg border-l-4 border-blue-400">
                    <p class="text-sm text-blue-700">
                        <i class="fas fa-info-circle mr-2"></i>
                        <strong>Dica:</strong> Certifique-se de ter o app Lista F√°cil instalado. 
                        Se n√£o tiver, baixe gratuitamente na Play Store.
                    </p>
                </div>
            </div>

            <!-- Card Secund√°rio - Sobre o App -->
            <div class="mt-8 bg-white rounded-2xl shadow-lg p-8">
                <h2 class="text-2xl font-bold text-gray-900 mb-4 text-center">
                    Por que usar Lista F√°cil?
                </h2>
                <div class="grid md:grid-cols-3 gap-4 mt-6">
                    <div class="text-center">
                        <div class="w-16 h-16 mx-auto bg-purple-100 rounded-full flex items-center justify-center mb-3">
                            <i class="fas fa-robot text-purple-600 text-2xl"></i>
                        </div>
                        <h3 class="font-semibold mb-2">IA Integrada</h3>
                        <p class="text-sm text-gray-600">Comandos de voz inteligentes</p>
                    </div>
                    <div class="text-center">
                        <div class="w-16 h-16 mx-auto bg-blue-100 rounded-full flex items-center justify-center mb-3">
                            <i class="fas fa-share-alt text-blue-600 text-2xl"></i>
                        </div>
                        <h3 class="font-semibold mb-2">Compartilhamento</h3>
                        <p class="text-sm text-gray-600">Listas em tempo real</p>
                    </div>
                    <div class="text-center">
                        <div class="w-16 h-16 mx-auto bg-green-100 rounded-full flex items-center justify-center mb-3">
                            <i class="fas fa-cloud text-green-600 text-2xl"></i>
                        </div>
                        <h3 class="font-semibold mb-2">Backup Seguro</h3>
                        <p class="text-sm text-gray-600">Seus dados protegidos</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="bg-gray-900 text-white py-8 px-6">
        <div class="container mx-auto text-center">
            <p>&copy; 2025 Lista F√°cil. Todos os direitos reservados.</p>
        </div>
    </footer>

    <script>
        // Extrai par√¢metro url da query string
        function getUrlParameter(name) {
            name = name.replace(/[\[]/, '\\[').replace(/[\]]/, '\\]');
            const regex = new RegExp('[\\?&]' + name + '=([^&#]*)');
            const results = regex.exec(location.search);
            return results === null ? '' : decodeURIComponent(results[1].replace(/\+/g, ' '));
        }

        // Fun√ß√£o para abrir o app
        function openApp() {
            const urlParam = getUrlParameter('url');
            
            if (!urlParam) {
                alert('Erro: Link inv√°lido. URL n√£o encontrada.');
                return;
            }

            // Monta o deep link: listafacil://import?url=<valor-extra√≠do>
            // N√£o usar encodeURIComponent pois o base64 j√° √© seguro para URL
            // (exceto = que vira %3D, mas o Android pode ter problemas com isso)
            const deepLink = `listafacil://import?url=${urlParam}`;
            
            console.log('üîó Tentando abrir app com deep link:', deepLink);
            console.log('üîó URL param (base64):', urlParam);
            
            // Tenta abrir o app
            window.location.href = deepLink;
            
            // Se o app n√£o abrir em 2 segundos, mostra op√ß√£o de download
            setTimeout(() => {
                const downloadContainer = document.getElementById('downloadAppContainer');
                if (downloadContainer) {
                    downloadContainer.classList.remove('hidden');
                }
                
                const importButton = document.querySelector('#importButtonContainer button');
                if (importButton) {
                    importButton.classList.add('opacity-50');
                    importButton.disabled = true;
                }
            }, 2000);
        }

        // Detecta se √© mobile
        function isMobile() {
            return /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
        }

        // Verifica se tem par√¢metro url
        window.addEventListener('DOMContentLoaded', function() {
            const urlParam = getUrlParameter('url');
            
            if (!urlParam) {
                // Se n√£o tiver par√¢metro, mostra mensagem de erro
                document.querySelector('h1').textContent = 'Link Inv√°lido';
                document.querySelector('p').textContent = 'Este link n√£o cont√©m uma lista de compras v√°lida. Por favor, verifique o link compartilhado.';
                
                const buttonContainer = document.getElementById('importButtonContainer');
                if (buttonContainer) {
                    buttonContainer.innerHTML = `
                        <a href="index.html" class="inline-block hero-gradient text-white px-8 py-4 rounded-full font-semibold hover:opacity-90 transition">
                            Voltar ao Site
                        </a>
                    `;
                }
            } else {
                console.log('‚úÖ URL encontrada:', urlParam);
            }
        });
    </script>
</body>
</html>
